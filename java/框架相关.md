## 加载配置文件的方法

假设配置文件（.properties形式的文件）中的内容是：

> user=zhangsan
>
> password=123

**方法一**：使用类加载器加载配置文件

```java
//1.获取类加载器
ClassLoader cl = 类名.class.getClassLoader（）；
//或 ClassLoader cl=this.getClass().getClassLoader(); 

//2.使用类装载器读取配置文件
InputStream is= cl.getResourceAsStream("配置文件全名");
Properties prop = new Properties();
prop.load(is); 

//以下代码输出为 zhangsan 123
String user = prop.getProperty("user");
String password = prop.getProperty("password");
System.out.println(user+" "+password);
```

**方法二**：使用ServletContext加载文件

```java
//1.使用ServletContext加载配置文件
//加载位于WebRoot目录下的配置文件
InputStream in =this.getServletContext().getResourceAsStream("/配置文件名（.properties形式的文件）");
Properties prop = new Properties();
prop.load(in)

//以下代码输出为 zhangsan 123
String user = prop.getProperty("user");
String password = prop.getProperty("password");
System.out.println(user+" "+password);
```

**方法三：**通过数据流来读取

```java
//1.获取类加载器
ClassLoader cl = 类名.class.getClassLoader（）；
//或 ClassLoader cl=this.getClass().getClassLoader(); 

//2.使用类装载器读取配置文件
FileInputStream fis = new FileLoaderStream("配置文件全名")
Properties prop = new Properties();
prop.load(fis); 

//以下代码输出为 zhangsan 123
String user = prop.getProperty("user");
String password = prop.getProperty("password");
System.out.println(user+" "+password);
```



#### getResourceAsStream的用法

> 摘自：<https://www.cnblogs.com/macwhirr/p/8116583.html>

**首先，Java中的getResourceAsStream有以下几种：**&nbsp;

1. `Class.getResourceAsStream(String path) `： path 不以&rsquo;/'开头时默认是从此类所在的包下取资源，以&rsquo;/'开头则是从ClassPath根下获取。其只是通过path构造一个绝对路径，最终还是由ClassLoader获取资源。&nbsp;

2. `Class.getClassLoader.getResourceAsStream(String path)` ：默认则是从ClassPath根下获取，**path不能以&rsquo;/'开头**，最终是由ClassLoader获取资源。&nbsp;

3. `ServletContext. getResourceAsStream(String path)`：默认从WebAPP根目录下取资源，Tomcat下path是否以&rsquo;/'开头无所谓，当然这和具体的容器实现有关。&nbsp;

4. Jsp下的application内置对象就是上面的ServletContext的一种实现。&nbsp;

**其次，getResourceAsStream 用法大致有以下几种：**&nbsp;

1. 要加载的文件和.class文件在同一目录下，例如：com.x.y 下有类me.class ,同时有资源文件myfile.xml&nbsp;

那么，应该有如下代码：`me.class.getResourceAsStream("myfile.xml")`;

2. 在me.class目录的子目录下，例如：com.x.y 下有类me.class ,同时在 com.x.y.file 目录下有资源文myfile.xml&nbsp;

那么，应该有如下代码：&nbsp;`me.class.getResourceAsStream("file/myfile.xml")`;&nbsp;

3. 不在me.class目录下，也不在子目录下，例如：com.x.y 下有类me.class ,同时在 com.x.file 目录下有资源myfile.xml，那么，应该有如下代码：`me.class.getResourceAsStream("/com/x/file/myfile.xml")`;&nbsp;

**最后，自己的理解：**&nbsp;
getResourceAsStream读取的文件路径只局限与工程的源文件夹中，包括在工程src根目录下，以及类包里面任何位置，但是如果配置文件路径是在除了源文件夹之外的其他文件夹中时，该方法是用不了的。



## 动态代理

![](images/QQ图片20191020203905.jpg)

![](images/QQ图片20191020203944.jpg)



## 理解ORM和数据持久化

[理解ORM和数据持久化](<https://blog.csdn.net/u012585964/article/details/52412520>)



